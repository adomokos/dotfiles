#!/bin/sh

SESSION_NAME="work"

tmux has-session -t $SESSION_NAME

if [ $? != 0 ]
then
  cd ~/Projects/AuditSight/code/

  # Monolith (1)
  tmux new -d -s $SESSION_NAME -n monolith
  tmux send-keys -t $SESSION_NAME:1 "cd monolith" C-m

  tmux new-window -n odw -t $SESSION_NAME:2
  tmux send-keys -t $SESSION_NAME:2 "cd odw" C-m

  tmux new-window -n tf-monorepo -t $SESSION_NAME:3
  tmux send-keys -t $SESSION_NAME:3 "cd terraform-monorepo" C-m

  tmux new-window -n order-service -t $SESSION_NAME:4
  tmux send-keys -t $SESSION_NAME:4 "cd order-service" C-m

  tmux new-window -n mr-radar -t $SESSION_NAME:5
  tmux send-keys -t $SESSION_NAME:5 "cd mr-radar" C-m

  # Start out on the first window when we attach
  tmux select-window -t $SESSION_NAME:1
fi
tmux attach-session -t $SESSION_NAME
